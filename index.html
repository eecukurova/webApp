<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EralpAhmet Trading Company</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="config.js"></script>
  <!-- Google Sign-In API -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <!-- reCAPTCHA API -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body class="text-gray-800 bg-gray-50 scroll-smooth">

  <!-- 🧱 Header -->
  <header class="bg-white shadow-md fixed w-full z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <div class="text-xl font-bold text-indigo-600">EralpAhmet Trading Co.</div>
      <nav class="space-x-6 hidden md:flex items-center">
        <a href="#hero" class="hover:text-indigo-500 font-medium">Ana Sayfa</a>
        <a href="#strategies" class="hover:text-indigo-500 font-medium">Stratejiler</a>
        <a href="#request" class="hover:text-indigo-500 font-medium">Strateji Talebi</a>
        <a href="#contact" class="hover:text-indigo-500 font-medium">İletişim</a>
        
        <!-- Authentication buttons -->
        <div id="authButtons" class="ml-4">
          <button id="loginBtn" onclick="openLoginModal()" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition">
            Giriş Yap
          </button>
          <div id="userInfo" class="hidden">
            <span id="userName" class="text-indigo-600 font-medium mr-2"></span>
            <button onclick="logout()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">
              Çıkış Yap
            </button>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <!-- 🔐 Login Modal -->
  <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
    <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Giriş Yap</h2>
        <button onclick="closeLoginModal()" class="text-gray-500 hover:text-gray-700">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <form id="loginForm" class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">E-posta</label>
          <input type="email" id="loginEmail" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Şifre</label>
          <input type="password" id="loginPassword" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
        </div>
        
        <!-- reCAPTCHA -->
        <div id="recaptchaContainer" class="g-recaptcha"></div>
        
        <div class="space-y-3">
          <button type="submit" class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition">
            Giriş Yap
          </button>
          
          <div class="text-center">
            <span class="text-gray-500">veya</span>
          </div>
          
          <!-- Google Sign-In Button -->
          <div id="googleSignInButton" class="flex justify-center"></div>
        </div>
      </form>
    </div>
  </div>

  <!-- 🏠 Hero Section -->
  <section id="hero" class="min-h-screen flex items-center justify-center pt-20 px-4 relative" style="background-image: url('./fotos/ana_sayfa.png'); background-size: cover; background-position: center; background-repeat: no-repeat;">
    <!-- Background overlay for better text readability -->
    <div class="absolute inset-0 bg-black bg-opacity-40"></div>
    
    <div class="text-center max-w-2xl relative z-10">
      <h1 class="text-4xl md:text-5xl font-bold mb-4 text-white drop-shadow-lg">Profesyonel Stratejilerle Ticaretinizi Geliştirin</h1>
      <p class="text-lg md:text-xl mb-6 text-white drop-shadow-md">Başarınız için özel olarak tasarlanmış güçlü TradingView scriptleri geliştiriyoruz.</p>
      <a href="#strategies" class="inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg shadow hover:bg-indigo-700 transition">Stratejileri Keşfedin</a>
    </div>
  </section>

  <!-- 📈 Strategies Section -->
  <section id="strategies" class="py-16 bg-white px-4">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-3xl font-bold text-center mb-12">Öne Çıkan Stratejilerimiz</h2>
      <div class="grid md:grid-cols-2 gap-8">
        
        <!-- Strategy 1 -->
        <div class="bg-gray-100 rounded-lg shadow p-6">
          <h3 class="text-2xl font-semibold mb-4">PSAR Strategy</h3>
          <img src="fotos/psar_strateji.png" alt="PSAR Strategy Chart" class="rounded mb-4 w-full">
          <p class="mb-4">PSAR ATR Stratejisi, Parabolic SAR ve Average True Range (ATR) göstergelerini birleştiren gelişmiş bir momentum tabanlı trading stratejisidir. Bu strateji, trend yönünü belirlemek için PSAR noktalarını kullanırken, ATR ile volatilite bazlı stop-loss ve take-profit seviyeleri belirler. Özellikle güçlü trendlerde yüksek kazanç potansiyeli sunar ve ani fiyat hareketlerine karşı koruma sağlar. Strateji, 15 dakikalık timeframe'de çalışarak hem kısa vadeli fırsatları yakalar hem de trend devam ederken pozisyonları korur.</p>
          <button class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Satın Al</button>
        </div>

        <!-- Strategy 2 -->
        <div class="bg-gray-100 rounded-lg shadow p-6">
          <h3 class="text-2xl font-semibold mb-4">ATR Strategy</h3>
          <img src="fotos/atr_strateji.png" alt="ATR Strategy Chart" class="rounded mb-4 w-full">
          <p class="mb-4">ATR Stratejisi, Average True Range göstergesine dayalı volatilite odaklı bir trading yaklaşımıdır. Bu strateji, piyasa volatilitesini analiz ederek optimal giriş ve çıkış noktalarını belirler. ATR değerlerine göre dinamik stop-loss seviyeleri ayarlar ve risk yönetimini volatilite bazlı yapar. Strateji, düşük volatilite dönemlerinde daha konservatif, yüksek volatilite dönemlerinde ise daha agresif pozisyonlar alır. Bu yaklaşım, piyasa koşullarına adapte olarak tutarlı performans sağlar.</p>
          <button class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700">Satın Al</button>
        </div>

      </div>
    </div>
  </section>

  <!-- 🌟 Premium Content Section -->
  <section id="premiumContent" class="hidden py-16 bg-gradient-to-r from-indigo-600 to-purple-600">
    <div class="max-w-7xl mx-auto px-4 text-center text-white">
      <h2 class="text-3xl font-bold mb-4">🎉 Premium Üye Avantajlarınız</h2>
      <p class="text-xl mb-8">Giriş yaptığınız için özel indirimler ve avantajlar sizi bekliyor!</p>
      
      <div class="grid md:grid-cols-3 gap-8 mb-8">
        <div class="bg-white bg-opacity-20 p-6 rounded-lg">
          <h3 class="text-xl font-semibold mb-2">📈 Ücretsiz Analiz</h3>
          <p>Kişisel trading analizi ve strateji önerileri</p>
        </div>
        <div class="bg-white bg-opacity-20 p-6 rounded-lg">
          <h3 class="text-xl font-semibold mb-2">💰 %20 İndirim</h3>
          <p>Tüm stratejilerde özel üye indirimi</p>
        </div>
        <div class="bg-white bg-opacity-20 p-6 rounded-lg">
          <h3 class="text-xl font-semibold mb-2">🎯 Öncelikli Destek</h3>
          <p>7/24 öncelikli teknik destek hizmeti</p>
        </div>
      </div>
      
      <p class="text-lg">Hoşgeldiniz <span id="premiumUserName" class="font-bold"></span>! 🚀</p>
    </div>
  </section>

  <!-- 🧾 Request Custom Strategy Section -->
  <section id="request" class="py-16 bg-gray-50 px-4">
    <div class="max-w-2xl mx-auto">
      <h2 class="text-3xl font-bold text-center mb-4">Strateji Talebi</h2>
      <p class="text-center mb-8">Hangi stratejimizi satın almak istiyorsunuz? Aşağıdaki formu doldurarak talebinizi iletebilirsiniz. Uzman ekibimiz en kısa sürede sizinle iletişime geçecektir.</p>
      
      <!-- Login Required Message -->
      <div id="loginRequiredMessage" class="hidden bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-6 text-center">
        <p class="mb-2">Strateji talebi için giriş yapmanız gerekiyor.</p>
        <button onclick="openLoginModal()" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded transition">
          Giriş Yap
        </button>
      </div>
      
      <form id="strategyForm" onsubmit="handleFormSubmit(event)" class="space-y-6 bg-white p-6 rounded-lg shadow">
        <div>
          <label class="block mb-1 font-medium">İsim</label>
          <input type="text" id="name" class="w-full border border-gray-300 rounded px-4 py-2" required />
        </div>
        <div>
          <label class="block mb-1 font-medium">E-posta</label>
          <input type="email" id="email" class="w-full border border-gray-300 rounded px-4 py-2" required />
        </div>
        <div>
          <label class="block mb-1 font-medium">TradingView Kullanıcı Adı</label>
          <input type="text" id="tradingViewUsername" class="w-full border border-gray-300 rounded px-4 py-2" required />
        </div>
        <div>
          <label class="block mb-1 font-medium">İstediğiniz Strateji</label>
          <select id="selectedStrategy" class="w-full border border-gray-300 rounded px-4 py-2" required>
            <option value="">Bir strateji seçin</option>
          </select>
        </div>
        <div>
          <label class="block mb-1 font-medium">Not Yazınız</label>
          <textarea id="notes" class="w-full border border-gray-300 rounded px-4 py-2" rows="4" placeholder="Ek bilgi veya özel talepleriniz varsa buraya yazabilirsiniz..."></textarea>
        </div>
        <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">Talep Gönder</button>
      </form>
    </div>
  </section>

  <!-- 📬 Contact Section (Footer) -->
  <footer id="contact" class="bg-white py-12 border-t">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <h3 class="text-2xl font-semibold mb-4">İletişim</h3>
      <p class="mb-2">E-posta: <a href="mailto:info@eralpahmettrading.com" class="text-indigo-600 hover:underline">info@eralpahmettrading.com</a></p>
      <div class="flex justify-center space-x-6 mt-4 text-xl">
        <a href="#" class="hover:text-indigo-500" title="Telegram">📨</a>
        <a href="#" class="hover:text-indigo-500" title="Discord">💬</a>
      </div>
      <p class="mt-8 text-sm text-gray-500">© 2025 EralpAhmet Trading Company. Tüm hakları saklıdır.</p>
    </div>
  </footer>

  <script>
    // Global authentication state
    let isAuthenticated = false;
    let currentUser = null;

    // Initialize dropdown when page loads
    document.addEventListener('DOMContentLoaded', function() {
      populateStrategyDropdown();
      initializeAuth();
    });

    // Initialize authentication
    function initializeAuth() {
      // Initialize Google Sign-In
      google.accounts.id.initialize({
        client_id: config.auth.googleClientId,
        callback: handleGoogleSignIn
      });

      // Render Google Sign-In button
      google.accounts.id.renderButton(
        document.getElementById('googleSignInButton'),
        {
          theme: 'outline',
          size: 'large',
          text: 'continue_with',
          shape: 'rectangular',
          width: 250
        }
      );

      // Initialize reCAPTCHA
      if (typeof grecaptcha !== 'undefined') {
        grecaptcha.render('recaptchaContainer', {
          'sitekey': config.auth.recaptchaSiteKey
        });
      }

      // Check if user is already logged in
      checkAuthState();
    }

    // Check authentication state
    function checkAuthState() {
      const savedUser = localStorage.getItem('currentUser');
      if (savedUser) {
        currentUser = JSON.parse(savedUser);
        isAuthenticated = true;
        updateAuthUI();
      }
    }

    // Handle Google Sign-In
    function handleGoogleSignIn(response) {
      const credential = parseJwt(response.credential);
      
      currentUser = {
        id: credential.sub,
        name: credential.name,
        email: credential.email,
        picture: credential.picture,
        loginMethod: 'google'
      };
      
      isAuthenticated = true;
      localStorage.setItem('currentUser', JSON.stringify(currentUser));
      updateAuthUI();
      closeLoginModal();
      
      // Show success message
      showMessage('Başarıyla giriş yaptınız!', 'success');
    }

    // Parse JWT token
    function parseJwt(token) {
      const base64Url = token.split('.')[1];
      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
      const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      }).join(''));
      return JSON.parse(jsonPayload);
    }

    // Regular login with email/password
    function handleRegularLogin(email, password) {
      // Verify reCAPTCHA
      const recaptchaResponse = grecaptcha.getResponse();
      if (!recaptchaResponse) {
        showMessage('Lütfen reCAPTCHA\'yı tamamlayın.', 'error');
        return;
      }

      // Demo authentication (in real app, this would be server-side)
      if (email && password) {
        currentUser = {
          id: Date.now().toString(),
          name: email.split('@')[0],
          email: email,
          picture: null,
          loginMethod: 'email'
        };
        
        isAuthenticated = true;
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        updateAuthUI();
        closeLoginModal();
        
        showMessage('Başarıyla giriş yaptınız!', 'success');
      }
    }

    // Login modal functions
    function openLoginModal() {
      document.getElementById('loginModal').classList.remove('hidden');
      // Reset reCAPTCHA
      if (typeof grecaptcha !== 'undefined') {
        grecaptcha.reset();
      }
    }

    function closeLoginModal() {
      document.getElementById('loginModal').classList.add('hidden');
      document.getElementById('loginForm').reset();
    }

    // Logout function
    function logout() {
      isAuthenticated = false;
      currentUser = null;
      localStorage.removeItem('currentUser');
      
      // Sign out from Google
      if (typeof google !== 'undefined') {
        google.accounts.id.disableAutoSelect();
      }
      
      updateAuthUI();
      showMessage('Başarıyla çıkış yaptınız.', 'success');
    }

    // Update authentication UI
    function updateAuthUI() {
      const loginBtn = document.getElementById('loginBtn');
      const userInfo = document.getElementById('userInfo');
      const userName = document.getElementById('userName');
      const loginRequiredMessage = document.getElementById('loginRequiredMessage');
      const strategyForm = document.getElementById('strategyForm');
      const premiumContent = document.getElementById('premiumContent');
      const premiumUserName = document.getElementById('premiumUserName');
      
      if (isAuthenticated && currentUser) {
        // Header authentication
        loginBtn.classList.add('hidden');
        userInfo.classList.remove('hidden');
        userName.textContent = currentUser.name;
        
        // Strategy form
        loginRequiredMessage.classList.add('hidden');
        strategyForm.classList.remove('hidden');
        
        // Premium content
        premiumContent.classList.remove('hidden');
        premiumUserName.textContent = currentUser.name;
      } else {
        // Header authentication
        loginBtn.classList.remove('hidden');
        userInfo.classList.add('hidden');
        userName.textContent = '';
        
        // Strategy form
        loginRequiredMessage.classList.remove('hidden');
        strategyForm.classList.add('hidden');
        
        // Premium content
        premiumContent.classList.add('hidden');
        premiumUserName.textContent = '';
      }
    }

    // Show message function
    function showMessage(message, type) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
        type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
      }`;
      messageDiv.textContent = message;
      
      document.body.appendChild(messageDiv);
      
      setTimeout(() => {
        messageDiv.remove();
      }, 3000);
    }

    // Handle login form submission
    document.addEventListener('DOMContentLoaded', function() {
      const loginForm = document.getElementById('loginForm');
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value;
        const password = document.getElementById('loginPassword').value;
        handleRegularLogin(email, password);
      });
    });

    // Populate strategy dropdown from config
    function populateStrategyDropdown() {
      const select = document.getElementById('selectedStrategy');
      config.strategies.forEach(strategy => {
        const option = document.createElement('option');
        option.value = strategy;
        option.textContent = strategy;
        select.appendChild(option);
      });
    }

    // Handle form submission
    function handleFormSubmit(event) {
      event.preventDefault();
      
      // Check if user is logged in
      if (!isAuthenticated) {
        showMessage('Strateji talebi için giriş yapmanız gerekiyor.', 'error');
        openLoginModal();
        return;
      }
      
      const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        tradingViewUsername: document.getElementById('tradingViewUsername').value,
        selectedStrategy: document.getElementById('selectedStrategy').value,
        notes: document.getElementById('notes').value
      };

      // Send email
      sendEmail(formData);
    }

    // Send email function
    function sendEmail(data) {
      const subject = encodeURIComponent(config.email.subject);
      const body = encodeURIComponent(
        `Yeni Strateji Talebi Detayları:\n\n` +
        `İsim: ${data.name}\n` +
        `E-posta: ${data.email}\n` +
        `TradingView Kullanıcı Adı: ${data.tradingViewUsername}\n` +
        `İstenen Strateji: ${data.selectedStrategy}\n` +
        `Notlar: ${data.notes}\n\n` +
        `Talep Tarihi: ${new Date().toLocaleString('tr-TR')}`
      );

      // Open email client with pre-filled data
      const mailtoLink = `mailto:${config.email.recipient}?subject=${subject}&body=${body}`;
      window.location.href = mailtoLink;

      // Show success message
      alert('Talebiniz hazırlandı! E-posta istemciniz açılacak. Lütfen e-postayı gönderin.');
      
      // Reset form
      document.getElementById('strategyForm').reset();
    }
  </script>

</body>
</html> 